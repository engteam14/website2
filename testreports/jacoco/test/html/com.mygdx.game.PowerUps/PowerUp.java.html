<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>PowerUp.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">core</a> &gt; <a href="index.source.html" class="el_package">com.mygdx.game.PowerUps</a> &gt; <span class="el_source">PowerUp.java</span></div><h1>PowerUp.java</h1><pre class="source lang-java linenums">package com.mygdx.game.PowerUps;

import com.badlogic.gdx.utils.TimeUtils;
import com.mygdx.game.Components.Pirate;

/**
 * // Assessment 2 requirement //
 * A PowerUp that can modify the value of any Ship for a limited or permanent amount of time.
 */
public class PowerUp {

    private String key;
    private PowerUpOperation oper;
    private float value;
    private long duration;
    private long startTime;
    private boolean done;

    /**
     * Create a PowerUp which lasts for a permanent length of time.
     * @param key           The key of the value to affect
     * @param operation     The way the key is applied to the value
     * @param value         The value that is applied to the key
     */
    public PowerUp(String key, PowerUpOperation operation, float value) {
<span class="nc" id="L26">        this(key, operation, value, -1);</span>
<span class="nc" id="L27">    }</span>

    /**
     * Create a PowerUp that lasts for a limited duration of time.
     * @param key           The key of the value to affect
     * @param operation     The way the key is applied to the value
     * @param value         The value that is applied to the key
     * @param duration      The duration that the PowerUp is active
     */
<span class="nc" id="L36">    public PowerUp(String key, PowerUpOperation operation, float value, int duration) {</span>
<span class="nc" id="L37">        this.key = key;</span>
<span class="nc" id="L38">        this.oper = operation;</span>
<span class="nc" id="L39">        this.value = value;</span>
<span class="nc" id="L40">        this.duration = duration;</span>
<span class="nc" id="L41">        this.done = false;</span>
<span class="nc" id="L42">    }</span>

    /**
     * Apply PowerUp modifiers to the Pirate.
     * @param pirate        The Pirate to apply the PowerUp to
     */
    public void EnablePowerUp(Pirate pirate) {
<span class="nc bnc" id="L49" title="All 6 branches missed.">        switch (oper){</span>
            case replace:
<span class="nc" id="L51">                pirate.setValue(key, value);</span>
<span class="nc" id="L52">                break;</span>
            case increment:
<span class="nc" id="L54">                pirate.setValue(key, pirate.getValue(key) + value);</span>
<span class="nc" id="L55">                break;</span>
            case decrement:
<span class="nc" id="L57">                pirate.setValue(key, pirate.getValue(key) - value);</span>
<span class="nc" id="L58">                break;</span>
            case multiply:
<span class="nc" id="L60">                pirate.multValue(key, value);</span>
<span class="nc" id="L61">                break;</span>
            case divide:
<span class="nc" id="L63">                pirate.multValue(key, 1f/value);</span>
                break;
        }
<span class="nc" id="L66">        startTime = TimeUtils.millis();</span>
<span class="nc" id="L67">    }</span>

    /**
     * Check whether the PowerUp is permanent or temporary.
     * @return          True if the PowerUp is permanent
     */
    public boolean CheckPermanent() {
<span class="nc bnc" id="L74" title="All 2 branches missed.">        return (duration &lt;= 0);</span>
    }

    /**
     * Check whether a PowerUp is done.
     * @return          Whether the PowerUp is done or not
     */
    public boolean CheckPowerUpDone() {
<span class="nc" id="L82">        return CheckPowerUpDone(null);</span>
    }

    /**
     * Check whether a PowerUp is done, and Disable it if so.
     * @param pirate    The Pirate class to disable the PowerUp for
     * @return          Whether the PowerUp is done or not
     */
    public boolean CheckPowerUpDone(Pirate pirate) {
<span class="nc bnc" id="L91" title="All 2 branches missed.">        if (done) return true;</span>
<span class="nc bnc" id="L92" title="All 2 branches missed.">        if (duration &gt; 0) {</span>
<span class="nc" id="L93">            long timeSoFar = TimeUtils.timeSinceMillis(startTime) / 1000;</span>
<span class="nc bnc" id="L94" title="All 2 branches missed.">            if (timeSoFar &gt;= duration) {</span>
<span class="nc bnc" id="L95" title="All 2 branches missed.">                if (pirate != null) DisablePowerUp(pirate);</span>
<span class="nc" id="L96">                return true;</span>
            }
<span class="nc" id="L98">        } return false;</span>
    }

    /**
     * Remove PowerUp modifiers from a Pirate and reset to default.
     * @param pirate        The Pirate to return to normal
     */
    public void DisablePowerUp(Pirate pirate) {
<span class="nc bnc" id="L106" title="All 2 branches missed.">        if (duration &gt; 0) pirate.resetToDefault(key);</span>
<span class="nc" id="L107">        done = true;</span>
<span class="nc" id="L108">    }</span>

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.6.202009150832</span></div></body></html>